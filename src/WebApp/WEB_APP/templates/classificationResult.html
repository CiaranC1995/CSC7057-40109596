{% extends "base.html" %}

{% block content %}

<section class="container">

    {% if classification_result.human_probability > 0.7 %}

    <div class="container">

        <div class="container resultHuman">
            <h1 class="display-4 humanResult">LIKELY HUMAN-WRITTEN CONTENT</h1>
        </div>

    </div>

    <div class="container modelConfidence">
        <h3 class="display-5">Probability of Human Authorship: {{ "%.2f" %
            (classification_result['human_probability'] * 100) }}%</h3>
    </div>

    <div class="container modelConfidence">
        <h3 class="display-5">Probability of AI Authorship: {{ "%.2f" %
            (classification_result['ai_probability'] * 100) }}%</h3>
    </div>

    {% elif classification_result.human_probability > 0.5 and classification_result.human_probability < 0.7 %} <div
        class="resultsContainer">

        <div class="container resultMixed">
            <h2 class="display-4 mixedResult">LIKELY A MIXTURE OF AI-GENERATED AND HUMAN-WRITTEN CONTENT</h2>
        </div>

        <div class="container modelConfidence">

            <div class="container">
                <h3>Human Authorship: {{ "%.2f" %
                    (classification_result['human_probability'] * 100) }}%</h3>
            </div>


            <div class="container">
                <h3>AI Authorship: {{ "%.2f" % (classification_result['ai_probability'] *
                    100) }}%</h3>
            </div>

        </div>

        </div>

        {% else %}

        <div class=" container resultsContainer">

            <div class="container resultAI">
                <h1 class="display-4 aiResult"> LIKELY AI-GENERATED CONTENT</h1>
            </div>

            <div class="container modelConfidence">

                <div class="container">
                    <h3 class="display-5">Probability of AI Authorship: {{ "%.2f" %
                        (classification_result['ai_probability']
                        * 100) }}%</h3>
                </div>

                <div class="container">
                    <h3 class="display-5">Probability of Human Authorship: {{ "%.2f" %
                        (classification_result['human_probability'] * 100) }}%</h3>
                </div>

            </div>

        </div>

        {% endif %}

        {% set ppls = classification_result['sentence_perplexities'] %}
        {% set max_value = ppls|max %}
        {% set max_index = ppls.index(max_value) %}

        <div class="container resultsContainer">

            <div class="container">
                <h3 class="display-4">Average Text Perplexity: {{ "%.3f" % classification_result['text_perplexity'] }}
                </h3>
            </div>

            <div class="container">
                <h3 class="display-4">Text Burstiness: {{ "%.3f" % classification_result['text_burstiness'] }}</h3>
            </div>

        </div>

        <div class="container resultsContainer">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Sentence</th>
                        <th>Perplexity</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sentence, perplexity in sentences_perplexities %}
                    <tr {% if perplexity < 25 %} class="highlight" {% endif %}>
                        <td>{{ sentence }}</td>
                        <td>{{ "%.3f" % perplexity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div class="container">
                <h3>Sentence With Highest Perplexity</h3>
            </div>

            <div class="container resultsContainer">

                <p>The sentence with the highest perplexity ... <i>"{{ classification_result['sentences'][max_index]
                        }}"</i>
                    ... has a perplexity score of : <b>{{ "%.3f" % max_value }}</b></p>

            </div>

        </div>

</section>

{% endblock %}