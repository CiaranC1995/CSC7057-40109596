{% extends "base.html" %}

{% block content %}

<section class="userHistory">

    {% if empty_message %}

    <div class="emptyMessage">

        <div class="emptyMessageContainer">
            <h3>{{ empty_message }}</h3>
        </div>

        <div class="emptyMessageContainer">
            <p>Please analyse some text and come back to see detailed results.</p>
        </div>

        <div class="emptyMessageContainer">
            <a href="/"><button class="btn btn-dark">Analyse</button></a>
        </div>

    </div>

    {% else %}

    <div class="historyContainer">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Input Text</th>
                    <th>Avg. Perplexity</th>
                    <th>Burstiness</th>
                    <th>Human Prob.</th>
                    <th>AI Prob.</th>
                    <th>Result</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for record in history_info %}
                <tr>
                    <td>{{ record[1] }}</td>
                    <td class="truncated-text">{{ record[2] }}</td>
                    <td>{{ "%.3f" % record[4] }}</td>
                    <td>{{ "%.3f" % record[5] }}</td>
                    <td>{{ "%.2f" % (record[7] * 100) }}%</td>
                    <td>{{ "%.2f" % (record[8] * 100) }}%</td>
                    {% if record[7] > 0.7 %}
                    <td>Likely Human-Written</td>
                    {% elif record[7] < 0.7 and record[7]> 0.5 %}
                        <td>AI and Human Detected</td>
                        {% else %}
                        <td>Likely AI-Generated</td>
                        {% endif %}
                        <td><a href="/specificHistory?classifier_output_id={{ record[0] }}"><button type="button"
                                    class="btn btn-dark">Details</button></a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

    <hr>

    <div class="container"><a href="#"><button class="btn-danger">Clear History</button></a></div>

    {% endif %}

</section>

{% endblock %}